package leetcode.b200;//
//
// ä¸€äº›æ¶é­”æŠ“ä½äº†å…¬ä¸»ï¼ˆPï¼‰å¹¶å°†å¥¹å…³åœ¨äº†åœ°ä¸‹åŸŽçš„å³ä¸‹è§’ã€‚åœ°ä¸‹åŸŽæ˜¯ç”± M x N ä¸ªæˆ¿é—´ç»„æˆçš„äºŒç»´ç½‘æ ¼ã€‚æˆ‘ä»¬è‹±å‹‡çš„éª‘å£«ï¼ˆKï¼‰æœ€åˆè¢«å®‰ç½®åœ¨å·¦ä¸Šè§’çš„æˆ¿é—´é‡Œï¼Œä»–å¿…é¡»ç©¿
//è¿‡åœ°ä¸‹åŸŽå¹¶é€šè¿‡å¯¹æŠ—æ¶é­”æ¥æ‹¯æ•‘å…¬ä¸»ã€‚ 
//
// éª‘å£«çš„åˆå§‹å¥åº·ç‚¹æ•°ä¸ºä¸€ä¸ªæ­£æ•´æ•°ã€‚å¦‚æžœä»–çš„å¥åº·ç‚¹æ•°åœ¨æŸä¸€æ—¶åˆ»é™è‡³ 0 æˆ–ä»¥ä¸‹ï¼Œä»–ä¼šç«‹å³æ­»äº¡ã€‚ 
//
// æœ‰äº›æˆ¿é—´ç”±æ¶é­”å®ˆå«ï¼Œå› æ­¤éª‘å£«åœ¨è¿›å…¥è¿™äº›æˆ¿é—´æ—¶ä¼šå¤±åŽ»å¥åº·ç‚¹æ•°ï¼ˆè‹¥æˆ¿é—´é‡Œçš„å€¼ä¸ºè´Ÿæ•´æ•°ï¼Œåˆ™è¡¨ç¤ºéª‘å£«å°†æŸå¤±å¥åº·ç‚¹æ•°ï¼‰ï¼›å…¶ä»–æˆ¿é—´è¦ä¹ˆæ˜¯ç©ºçš„ï¼ˆæˆ¿é—´é‡Œçš„å€¼ä¸º 0ï¼‰ï¼Œè¦ä¹ˆ
//åŒ…å«å¢žåŠ éª‘å£«å¥åº·ç‚¹æ•°çš„é­”æ³•çƒï¼ˆè‹¥æˆ¿é—´é‡Œçš„å€¼ä¸ºæ­£æ•´æ•°ï¼Œåˆ™è¡¨ç¤ºéª‘å£«å°†å¢žåŠ å¥åº·ç‚¹æ•°ï¼‰ã€‚ 
//
// ä¸ºäº†å°½å¿«åˆ°è¾¾å…¬ä¸»ï¼Œéª‘å£«å†³å®šæ¯æ¬¡åªå‘å³æˆ–å‘ä¸‹ç§»åŠ¨ä¸€æ­¥ã€‚ 
//
// 
//
// ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—ç¡®ä¿éª‘å£«èƒ½å¤Ÿæ‹¯æ•‘åˆ°å…¬ä¸»æ‰€éœ€çš„æœ€ä½Žåˆå§‹å¥åº·ç‚¹æ•°ã€‚ 
//
// ä¾‹å¦‚ï¼Œè€ƒè™‘åˆ°å¦‚ä¸‹å¸ƒå±€çš„åœ°ä¸‹åŸŽï¼Œå¦‚æžœéª‘å£«éµå¾ªæœ€ä½³è·¯å¾„ å³ -> å³ -> ä¸‹ -> ä¸‹ï¼Œåˆ™éª‘å£«çš„åˆå§‹å¥åº·ç‚¹æ•°è‡³å°‘ä¸º 7ã€‚ 
//
// 
// 
// -2 (K) 
// -3 
// 3 
// 
// 
// -5 
// -10 
// 1 
// 
// 
// 10 
// 30 
// -5 (P) 
// 
// 
//
//
// 
//
// è¯´æ˜Ž: 
//
// 
// 
// éª‘å£«çš„å¥åº·ç‚¹æ•°æ²¡æœ‰ä¸Šé™ã€‚ 
// 
// ä»»ä½•æˆ¿é—´éƒ½å¯èƒ½å¯¹éª‘å£«çš„å¥åº·ç‚¹æ•°é€ æˆå¨èƒï¼Œä¹Ÿå¯èƒ½å¢žåŠ éª‘å£«çš„å¥åº·ç‚¹æ•°ï¼ŒåŒ…æ‹¬éª‘å£«è¿›å…¥çš„å·¦ä¸Šè§’æˆ¿é—´ä»¥åŠå…¬ä¸»è¢«ç›‘ç¦çš„å³ä¸‹è§’æˆ¿é—´ã€‚ 
// Related Topics äºŒåˆ†æŸ¥æ‰¾ åŠ¨æ€è§„åˆ’ 
// ðŸ‘ 274 ðŸ‘Ž 0


import java.util.Arrays;

//leetcode submit region begin(Prohibit modification and deletion)
class Solution174 {
    /**
     * æš´åŠ›å›žæº¯ æäº¤åŽè¶…æ—¶
     * æ€è·¯ï¼šæ¯åˆ°ä¸€ä¸ªæ ¼å­ï¼Œéƒ½æœ‰ä¸¤ç§é€‰æ‹©ï¼Œè¦ä¹ˆå‘å³ï¼Œè¦ä¹ˆå‘ä¸‹ï¼Œè¿™æ ·è‡ªç„¶è€Œç„¶å°±ä¼šå½¢æˆä¸€æ£µé€’å½’æ ‘ï¼Œæˆ‘ä»¬åªéœ€è¦è€ƒè™‘æ¯ä¸ªæ ¼å­éœ€è¦è€—è´¹çš„æœ€å°è¡€é‡ã€‚
     * æ¯ä¸ªæ ¼å­çš„æœ€å°è€—è¡€é‡åº”è¯¥æ˜¯å³æ–¹æ ¼å­å’Œä¸‹æ–¹æ ¼å­æœ€å°è€—è¡€é‡ä¸­çš„è¾ƒå°å€¼ï¼Œæ³¨æ„ï¼Œè¿™é‡Œçš„æ¯ä¸ªæ ¼å­çš„æœ€å°è€—è¡€é‡ä¸å•å•æŒ‡çš„æ˜¯æœ¬æ ¼è€—è¡€é‡ï¼Œè€Œæ˜¯åœ¨
     * ä¸æ–­å‘ä¸‹é€’å½’åŽï¼Œè‡ªåº•å‘ä¸Šè®¡ç®—å‡ºæ¥çš„ç´¯è®¡æœ€å°è€—è¡€é‡ï¼Œé€€å‡ºé€’å½’çš„æ¡ä»¶æ˜¯åˆ°è¾¾å…¬ä¸»æ‰€åœ¨åœ°ï¼Œä¹Ÿå°±æ˜¯æœ€åŽä¸€ä¸ªæ ¼å­
     * é€’å½’å…¬å¼ ï¼šå½“å‰æ ¼å­çš„æœ€å°è€—è¡€é‡ = min(å³æ–¹æ ¼å­æœ€å°è€—è¡€é‡,ä¸‹æ–¹æ ¼å­æœ€å°è€—è¡€é‡) - å½“å‰æ ¼å­çš„è€—è¡€é‡
     * ä¸Šé¢çš„å…¬å¼å¯èƒ½ä¼šå¾—å‡ºè´Ÿå€¼ï¼Œå› ä¸ºå¯èƒ½ä¹‹å‰çš„è€—è¡€é‡è¿˜æ²¡æœ‰å½“å‰çš„æ ¼å­åŠ è¡€å¤šï¼Œè¿™æ ·çš„è¯å½“å‰æ ¼å­çš„æœ€å°è€—è¡€é‡å³ä¸º0
     *
     * @param dungeon
     * @return
     */
    public int calculateMinimumHP(int[][] dungeon) {
        if (dungeon == null || dungeon.length == 0 || dungeon[0].length == 0) return 0;
        int row = dungeon.length, col = dungeon[0].length;
        return helper(0, 0, row, col, dungeon) + 1;
    }

    private int helper(int rowIdx, int colIdx, int row, int col, int[][] dungeon) {
        if (rowIdx >= row || colIdx >= col) {
            return Integer.MAX_VALUE;
        }
        if (rowIdx == row - 1 && colIdx == col - 1) {
            return dungeon[rowIdx][colIdx] < 0 ? -dungeon[rowIdx][colIdx] : 0;
        }
        int rowVal = helper(rowIdx + 1, colIdx, row, col, dungeon);
        int colVal = helper(rowIdx, colIdx + 1, row, col, dungeon);
        int need = Math.min(rowVal, colVal) - dungeon[rowIdx][colIdx];
        return Math.max(need, 0);
    }

    public static void main(String[] args) {
        int[][] ints = {{-2, -3, 3}, {-5, -10, 1}, {10, 30, -5}};
        int hp = new Solution174().calculateMinimumHP(ints);
        System.out.println(hp);
    }
}

class Solution174_1 {
    /**
     * æš´åŠ›å›žæº¯ æäº¤åŽè¶…æ—¶
     * æ€è·¯ï¼šæ¯åˆ°ä¸€ä¸ªæ ¼å­ï¼Œéƒ½æœ‰ä¸¤ç§é€‰æ‹©ï¼Œè¦ä¹ˆå‘å³ï¼Œè¦ä¹ˆå‘ä¸‹ï¼Œè¿™æ ·è‡ªç„¶è€Œç„¶å°±ä¼šå½¢æˆä¸€æ£µé€’å½’æ ‘ï¼Œæˆ‘ä»¬åªéœ€è¦è€ƒè™‘æ¯ä¸ªæ ¼å­éœ€è¦è€—è´¹çš„æœ€å°è¡€é‡ã€‚
     * æ¯ä¸ªæ ¼å­çš„æœ€å°è€—è¡€é‡åº”è¯¥æ˜¯å³æ–¹æ ¼å­å’Œä¸‹æ–¹æ ¼å­æœ€å°è€—è¡€é‡ä¸­çš„è¾ƒå°å€¼ï¼Œæ³¨æ„ï¼Œè¿™é‡Œçš„æ¯ä¸ªæ ¼å­çš„æœ€å°è€—è¡€é‡ä¸å•å•æŒ‡çš„æ˜¯æœ¬æ ¼è€—è¡€é‡ï¼Œè€Œæ˜¯åœ¨
     * ä¸æ–­å‘ä¸‹é€’å½’åŽï¼Œè‡ªåº•å‘ä¸Šè®¡ç®—å‡ºæ¥çš„ç´¯è®¡æœ€å°è€—è¡€é‡ï¼Œé€€å‡ºé€’å½’çš„æ¡ä»¶æ˜¯åˆ°è¾¾å…¬ä¸»æ‰€åœ¨åœ°ï¼Œä¹Ÿå°±æ˜¯æœ€åŽä¸€ä¸ªæ ¼å­
     * é€’å½’å…¬å¼ ï¼šå½“å‰æ ¼å­çš„æœ€å°è€—è¡€é‡ = min(å³æ–¹æ ¼å­æœ€å°è€—è¡€é‡,ä¸‹æ–¹æ ¼å­æœ€å°è€—è¡€é‡) - å½“å‰æ ¼å­çš„è€—è¡€é‡
     * ä¸Šé¢çš„å…¬å¼å¯èƒ½ä¼šå¾—å‡ºè´Ÿå€¼ï¼Œå› ä¸ºå¯èƒ½ä¹‹å‰çš„è€—è¡€é‡è¿˜æ²¡æœ‰å½“å‰çš„æ ¼å­åŠ è¡€å¤šï¼Œè¿™æ ·çš„è¯å½“å‰æ ¼å­çš„æœ€å°è€—è¡€é‡å³ä¸º0
     *
     * @param dungeon
     * @return
     */
    public int calculateMinimumHP(int[][] dungeon) {
        if (dungeon == null || dungeon.length == 0 || dungeon[0].length == 0) return 0;
        int[][] mem = new int[dungeon.length][dungeon[0].length];
        for (int[] ints : mem) Arrays.fill(ints, -1);
        return helper(0, 0, mem, dungeon) + 1;
    }

    private int helper(int rowIdx, int colIdx, int[][] mem, int[][] dungeon) {
        if (rowIdx >= mem.length || colIdx >= mem[0].length) {
            return Integer.MAX_VALUE;
        }
        if (mem[rowIdx][colIdx] != -1) {
            return mem[rowIdx][colIdx];
        }
        if (rowIdx == mem.length - 1 && colIdx == mem[0].length - 1) {
            return dungeon[rowIdx][colIdx] < 0 ? -dungeon[rowIdx][colIdx] : 0;
        }
        int rowVal = helper(rowIdx + 1, colIdx, mem, dungeon);
        int colVal = helper(rowIdx, colIdx + 1, mem, dungeon);
        int need = Math.min(rowVal, colVal) - dungeon[rowIdx][colIdx];
        mem[rowIdx][colIdx] = Math.max(need, 0);
        return mem[rowIdx][colIdx];
    }

    public static void main(String[] args) {
        int[][] ints = {{-2, -3, 3}, {-5, -10, 1}, {10, 30, -5}};
        int hp = new Solution174_1().calculateMinimumHP(ints);
        System.out.println(hp);
    }
}
//leetcode submit region end(Prohibit modification and deletion)
